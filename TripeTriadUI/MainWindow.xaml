<Window x:Class="TripeTriadUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TripeTriadUI"
        mc:Ignorable="d"
        Title="MainWindow" Height="419" Width="390">
    <Window.Resources>
        <local:TTViewModel x:Key="TTViewModel" />
        <CollectionViewSource Source="{Binding Source={StaticResource TTViewModel}, Path=PlayerViewModel.Hand}" x:Key="PlayerHand"/>
        <CollectionViewSource Source="{Binding Source={StaticResource TTViewModel}, Path=OpponentViewModel.Hand}" x:Key="OpponentHand"/>
    </Window.Resources>
    <Window.DataContext>
        <Binding Source="{StaticResource TTViewModel}" />
    </Window.DataContext>
    <Grid Margin="0,10,0,2">
        <Grid.RowDefinitions>
            <RowDefinition Height="13*"/>
            <RowDefinition Height="4*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="8*"/>
            <ColumnDefinition Width="57*"/>
        </Grid.ColumnDefinitions>
        <Grid Name="PlayerCards" Margin="0,8,0,3" Width="80" HorizontalAlignment="Left" Grid.ColumnSpan="2" Grid.RowSpan="2">
            <TextBlock TextWrapping="Wrap" Grid.ColumnSpan="2" HorizontalAlignment="Center" >
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0}: {1}">
                        <Binding Path="PlayerViewModel.Name" />
                        <Binding Path="PlayerViewModel.Score" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
            <ItemsControl Name="PlayerHandBox" ItemsSource="{Binding Source={StaticResource PlayerHand}}" 
                          HorizontalAlignment="Center" Margin="0,29,0,0" BorderThickness="0">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Content="{Binding Print}" Background="{Binding Colour}" 
                                Click="cardButton_Click" Tag="{Binding Index}"
                                HorizontalAlignment="Center" Margin="0,2.5,0,2.5" VerticalAlignment="Top" Height="60" Width="60">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Style.Triggers>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter Property="Background" Value="{Binding Colour}" />
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="True">
                                            <Setter Property="Background" Value="{Binding Colour}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
        <Grid Name="OpponentCards" Margin="0,8,0,3" Width="80" HorizontalAlignment="Right" Grid.Column="1" Grid.RowSpan="2">
            <TextBlock TextWrapping="Wrap" Grid.ColumnSpan="2" HorizontalAlignment="Center" >
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0}: {1}">
                        <Binding Path="OpponentViewModel.Name" />
                        <Binding Path="OpponentViewModel.Score" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
            <ItemsControl Name="OpponentHandBox" ItemsSource="{Binding Source={StaticResource OpponentHand}}" 
                          HorizontalAlignment="Center" Margin="0,29,0,0" BorderThickness="0">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Content="{Binding Print}" Background="{Binding Colour}" 
                                HorizontalAlignment="Center" Margin="0,2.5,0,2.5" VerticalAlignment="Top" Height="60" Width="60"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
        <Grid Name="Board" Margin="42,30,85,-20" Grid.Column="1" Grid.RowSpan="2">
            <TextBlock TextWrapping="Wrap" Text="{Binding Path=BoardViewModel.TurnString}" Grid.ColumnSpan="2" HorizontalAlignment="Center" />
            <Button Name="Board1" Content="{Binding Path=BoardViewModel.Spaces[0].Card.Print}" Background="{Binding Path=BoardViewModel.Spaces[0].Colour}" 
                    Click="boardButton_Click" Tag="1" HorizontalAlignment="Left" Margin="10,84,0,0" VerticalAlignment="Top" Height="60" Width="60"/>
            <Button Name="Board2" Content="{Binding Path=BoardViewModel.Spaces[1].Card.Print}" Background="{Binding Path=BoardViewModel.Spaces[1].Colour}" Click="boardButton_Click" Tag="2"
                HorizontalAlignment="Left" Margin="75,84,0,0" VerticalAlignment="Top" Height="60" Width="60"/>
            <Button Name="Board3" Content="{Binding Path=BoardViewModel.Spaces[2].Card.Print}" Background="{Binding Path=BoardViewModel.Spaces[2].Colour}" Click="boardButton_Click" Tag="3"
                HorizontalAlignment="Left" Margin="140,84,0,0" VerticalAlignment="Top" Height="60" Width="60"/>
            <Button Name="Board4" Content="{Binding Path=BoardViewModel.Spaces[3].Card.Print}" Background="{Binding Path=BoardViewModel.Spaces[3].Colour}" Click="boardButton_Click" Tag="4"
                HorizontalAlignment="Left" Margin="10,149,0,0" VerticalAlignment="Top" Height="60" Width="60"/>
            <Button Name="Board5" Content="{Binding Path=BoardViewModel.Spaces[4].Card.Print}" Background="{Binding Path=BoardViewModel.Spaces[4].Colour}" Click="boardButton_Click" Tag="5"
                HorizontalAlignment="Left" VerticalAlignment="Top" Height="60" Width="60" Margin="75,149,0,0"/>
            <Button Name="Board6" Content="{Binding Path=BoardViewModel.Spaces[5].Card.Print}" Background="{Binding Path=BoardViewModel.Spaces[5].Colour}" Click="boardButton_Click" Tag="6"
                HorizontalAlignment="Left" Margin="140,149,0,0" VerticalAlignment="Top" Height="60" Width="60"/>
            <Button Name="Board7" Content="{Binding Path=BoardViewModel.Spaces[6].Card.Print}" Background="{Binding Path=BoardViewModel.Spaces[6].Colour}" Click="boardButton_Click" Tag="7"
                HorizontalAlignment="Left" Margin="10,214,0,0" VerticalAlignment="Top" Height="60" Width="60"/>
            <Button Name="Board8" Content="{Binding Path=BoardViewModel.Spaces[7].Card.Print}" Background="{Binding Path=BoardViewModel.Spaces[7].Colour}" Click="boardButton_Click" Tag="8"
                HorizontalAlignment="Left" Margin="75,214,0,0" VerticalAlignment="Top" Height="60" Width="60"/>
            <Button Name="Board9" Content="{Binding Path=BoardViewModel.Spaces[8].Card.Print}" Background="{Binding Path=BoardViewModel.Spaces[8].Colour}" Click="boardButton_Click" Tag="9"
                HorizontalAlignment="Left" Margin="140,214,0,0" VerticalAlignment="Top" Height="60" Width="60"/>
            <Button Content="New Game" Click="newGameButton_Click"
                    HorizontalAlignment="Left" Margin="10,309,0,0" VerticalAlignment="Top" Width="190" Height="26"/>
        </Grid>
    </Grid>
</Window>
